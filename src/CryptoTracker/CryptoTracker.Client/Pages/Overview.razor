@page "/"
@using CryptoTracker.Shared
@rendermode InteractiveAuto
@inject HttpClient HttpClient

<PageTitle>Überblick</PageTitle>

<h1>Überblick</h1>

@if (IsLoading)
{
    <div class="w-100 h-100">
        <DxLoadingPanel CssClass="w-100"
                        Visible="true" />
    </div>
}
else
{
    <div class="mt-3" style="max-width:200px">
        <label for="walletCombo">Select Wallet:</label>
        <DxComboBox Id="walletCombo" Data="@Wallets" Value="@SelectedWallet" TextFieldName="@nameof(WalletDTO.Name)" Placeholder="Select Wallet" ValueChanged="@((WalletDTO wallet) => OnSelectedWalletChanged(wallet))" />
    </div>

    <div class="mt-3" style="max-width:200px">
        <label for="symbolCombo">Select Symbol:</label>
        <DxComboBox Id="symbolCombo" Data="@Symbols" Value="@SelectedSymbol" Placeholder="Select Symbol" ValueChanged="@((string symbol) => OnSelectedSymbolChanged(symbol))" />
    </div>

    <div class="mt-3">
        <DxDataGrid Data="@Flows" KeyFieldName="DateTime">
            <DxDataGridColumn Field="DateTime" />
            <DxDataGridColumn Field="FlowType" />
            <DxDataGridColumn Field="FlowDirection" />
            <DxDataGridColumn Field="SourceWallet" Width="150" />
            <DxDataGridColumn Field="TargetWallet" Width="150" />
            <DxDataGridColumn Field="FlowAmount" />
        </DxDataGrid>
    </div>

    <div class="mt-3">
        <p>Balance: @Balance</p>
    </div>
}

@if (ErrorMessage != null)
{
    <div class="alert alert-danger" role="alert" style="margin-top:20px">
        @ErrorMessage
    </div>
}